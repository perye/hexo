---
title: HashMap
categories: Java
tags:
  - HashMap
abbrlink: 3d614825
---

## HashMap容量、扩容

HashMap主要的成员变量
- size
    - 记录了Map中KV对的个数
- loadFactor
    - 装载因子，用来衡量HashMap满的程度。loadFactor的默认值为0.75f(`static final float DEFAULT_LOAD_FACTOR = 0.75f;`)
- capacity
    - 容量,默认容量16(`static final int DEFAULT_INITIAL_CAPACITY = 1 << 4; // aka 16`)
- threshold
    - 临界值,当实际KV个数超过threshold时,HashMap会将容量扩容,
    - `threshold = loadFactor * capacity`


## hash方法
### hash函数
- 直接定址法:直接以关键字k或者k加上某个常数(k+c)作为哈希地址
- 数字分析法:提取关键字中取值比较均匀的数字作为哈希地址
- 除留余数法：用关键字k除以某个不大于哈希表长度m的数p，将所得余数作为哈希表地址
- 分段叠加法：按照哈希表地址位数将关键字分成位数相等的几部分，其中最后一部分可以比较短。然后将这几部分相加，舍弃最高进位后的结果就是该关键字的哈希地址
- 平方取中法：如果关键字各个部分分布都不均匀的话，可以先求出它的平方值，然后按照需求取中间的几位作为哈希地址
- 伪随机数法：采用一个伪随机数当作哈希函数

### 解决碰撞的方法
- 开放定址法:开放定址法就是一旦发生了冲突，就去寻找下一个空的散列地址，只要散列表足够大，空的散列地址总能找到，并将记录存入
- 链地址法:将哈希表的每个单元作为链表的头结点，所有哈希地址为i的元素构成一个同义词链表。即发生冲突时就把该关键字链在以该单元为头结点的链表的尾部。
- 再哈希法:当哈希地址发生冲突用其他的函数计算另一个哈希函数地址，直到冲突不再产生为止。
- 建立公共溢出区:将哈希表分为基本表和溢出表两部分，发生冲突的元素都放入溢出表中。
